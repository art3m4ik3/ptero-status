"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.WhmcsAPI=void 0;const undici_1=require("undici"),options={method:"POST",headers:{responseEncoding:"utf8",Accept:"application/json"}};class WhmcsAPI{constructor(s){this.settings=s,this.call=async(s,e={})=>{const t=new URLSearchParams({...e,action:s,identifier:this.settings.whmcs.whmcsApiIdentifier,secret:this.settings.whmcs.whmcsApiSecret,responsetype:"json"}).toString(),i=`${this.settings.whmcs.whmcsApiUrl}/includes/api.php?${t}`,c=await(0,undici_1.fetch)(i,options),n=await c.json();if("success"!==n.result)throw new Error(n.message);return n}}}exports.WhmcsAPI=WhmcsAPI;