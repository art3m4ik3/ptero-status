"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.run=void 0;const discord_js_1=require("discord.js"),Register_1=require("../modules/Register"),run=async e=>{const s=e.discordClient;await s.user.setUsername(e.config.botUsername).catch((s=>e.logger.warn(s.message))),s.user.setActivity(e.config.botStatus,{type:discord_js_1.ActivityType.Playing}),e.logger.ready(`Invite the bot using:\nhttps://discord.com/oauth2/authorize?permissions=395204324416&scope=bot%20applications.commands%20applications.commands.permissions.update&client_id=${s.user.id}`),e.logger.ready(`${s.user.tag}, ready to serve ${s.guilds.cache.size} server${s.guilds.cache.size>1?'s"':0===s.guilds.cache.size?"s":":"}`);const i=e.discordClient.guilds.cache.map((e=>e));e.config.liveNodeEnabled&&e.updateLiveNodeCache(i),i.forEach((async s=>{if(e.config.bannedServers.includes(s.id))return await s.leave();const i=await s.fetchOwner();e.logger.ready(`${s.name} (${s.id}) - Owner: ${i.user.username} (${i.id})`)})),await new Register_1.Register(e).registerSlashCommands(Array.from(e.commands.values()),i),e.commands.forEach((s=>{s.setup&&s.setup({bot:e,guilds:i})}))};exports.run=run;