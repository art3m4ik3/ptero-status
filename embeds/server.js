"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.makeServerEmbed=void 0;const status_1=require("./status"),makeServerEmbed=(e,a,i,s,t)=>{const n=i.relationships.allocations.data.find((e=>!0===e.attributes.is_default))?.attributes,l=e.embed({title:`${i.name}`,description:i.description,fields:[{name:e.e("egg").toUpperCase(),value:i.relationships.egg?.attributes.name??"",inline:!0},{name:e.e("server_id").toUpperCase(),value:i.identifier,inline:!0},{name:e.e("connection").toUpperCase(),value:`${n?.ip_alias??n?.ip}:${n?.port}`,inline:!1},{name:"​",value:`**${e.e("limits").toUpperCase()}:**`},{name:e.e("cpu").toUpperCase(),value:e.functions.unlimitedOrValue(i.limits.cpu),inline:!0},{name:e.e("mem").toUpperCase(),value:e.functions.unlimitedOrValue(i.limits.memory),inline:!0},{name:e.e("disk").toUpperCase(),value:e.functions.unlimitedOrValue(i.limits.disk),inline:!0},{name:e.e("allocations").toUpperCase(),value:`${i.relationships.allocations.data.length}/${0===i.feature_limits.allocations?1:i.feature_limits.allocations}`,inline:!0},{name:e.e("backups").toUpperCase(),value:`${"number"==typeof s?.length?s.length:"?"}/${i.feature_limits.backups}`,inline:!0},{name:e.e("database_limit").toUpperCase(),value:`${i.feature_limits.databases}`,inline:!0}],url:`${e.config.pteroHost}/server/${i.identifier}`},{settings:a});if(i.is_suspended)l.addFields([{name:e.e("status").toUpperCase(),value:e.e("suspended").toUpperCase()}]);else{if(l.addFields([{name:"​",value:`**${e.e("backups").toUpperCase()}:**`}]),void 0!==s){const a=[];s.forEach((({attributes:i})=>{a.push({name:i.name,value:i.is_successful?`${Math.floor(i.bytes/1024/1024)}MB`:`${e.e("backing_up")} ...`,inline:!0})})),0===a.length&&a.push({name:e.e("no_backups"),value:"​",inline:!0}),l.addFields(a.slice(0,10))}else l.addFields([{name:e.e("not_available").toUpperCase(),value:"​",inline:!0}]);l.addFields([{name:"​",value:`**${e.e("server_info").toUpperCase()}:**`}]),t?l.addFields((0,status_1.serverStatusFields)(e,t)):l.addFields([{name:e.e("not_available").toUpperCase(),value:"​",inline:!0}])}return l};exports.makeServerEmbed=makeServerEmbed;