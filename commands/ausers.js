"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.cmd=void 0;const Command_1=require("../classes/Command"),user_1=require("../embeds/user"),run=async({bot:e,app:t,settings:s,interaction:a})=>{const r=a.options.getString("username"),n=a.options.getString("email"),i=await t.getAllUsers({servers:!0},r?{filter:r,filterBy:"username"}:n?{filter:n,filterBy:"email"}:void 0);if(0===i.length)return e.functions.handleNoResult(a,s,e.t("not_found.user"));const o=i.map((({attributes:t})=>(0,user_1.makeUserEmbed)(e,s,t)));await e.pagination.paginate(a,o,void 0,(async(r,n,{refreshEmbed:m})=>{const{value:u}=r;try{const a=async a=>{const r=await t.getUserInfo(i[a].attributes.id,{servers:!0});o[a]=(0,user_1.makeUserEmbed)(e,s,r)};switch(n.customId){case"refresh":await a(u),await m(n);break;case"next":case"back":await e.pagination.updateNextBack(a,n.customId,u,o.length)}}catch(t){await e.functions.handleError(a,s,t,!0)}}),void 0,!0)};exports.cmd=(new Command_1.CommandWithAdmin).setName("ausers").setDescription("ausers.main").setCategory("pterodactyl_admin").setRun(run).addStringOption((e=>e.setName("username").setDescription("ausers.username"))).addStringOption((e=>e.setName("email").setDescription("ausers.email")));